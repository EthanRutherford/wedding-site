<html>
	<head>
		<title>Gallery | Ethan and Raquel's Wedding</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="icon" href="/images/r.ico" />
		<link rel="stylesheet" href="https://use.typekit.net/shl6wlf.css" />
		<link rel="stylesheet" href="./styles.css" />
	</head>
	<body class="page">
		<div class="sidebar">
			<div class="nav">
				<img class="doodle" src="./images/doodle.png" />
				<a class="nav-link" href="/">Home</a>
				<a class="nav-link" href="/story">Our Story</a>
				<a class="nav-link" href="http://registry.rutherford.site">Registry</a>
				<a class="nav-link" href="/rsvp">RSVP</a>
				<a class="nav-link" href="/gallery">Gallery</a>
				<a class="nav-link" href="mailto:ethanrutherford2@gmail.com,redquitobud@gmail.com">Contact</a>
			</div>
			<div class="social">
				<a class="social-link" href="https://www.facebook.com/raquel.dottle">
					<img src="/images/facebook.svg" />
				</a>
				<a class="social-link" href="https://www.twitter.com/Highness_Ellie">
					<img src="/images/twitter.svg" />
				</a>
				<a class="social-link" href="https://www.instagram.com/ellietheadorable">
					<img src="/images/instagram.svg" />
				</a>
			</div>
		</div>
		<div class="main-content gallery">
			<div class="gallery-list">
				<div class="gallery-title">
					Gallery
				</div>
				<div class="gallery-blurb">
					All of our pictures!
					Click an image to view full resolution on the right.
					<br />
					Huge shoutout to our photographer, Kassie Kim
					(@sonoshukunannphotography).
				</div>
				<div class="gallery-images">
					<div class="gallery-column">
						<img class="fade-in list-image" src="/images/engagement/1-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/2-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/3-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/4-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/5-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/6-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/7-small.jpg" />
					</div>
					<div class="gallery-column">
						<img class="fade-in list-image" src="/images/engagement/8-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/9-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/10-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/11-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/12-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/13-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/14-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/15-small.jpg" />
						<img class="fade-in list-image" src="/images/engagement/16-small.jpg" />
					</div>
				</div>
			</div>
			<div class="gallery-view">
				<img class="fade-in full-image" />
				<svg class="left-icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 64 64">
					<path fill="currentColor" d="M38.96 58.07L16.04 35.18q-1.3-1.3-1.3-3.18t1.3-3.18l22.92-22.9q1.3-1.3 3.18-1.3t3.19 1.3l2.63 2.65q1.3 1.3 1.3 3.18t-1.3 3.18L30.87 32.02l17.1 17.05q1.3 1.34 1.3 3.2t-1.3 3.16l-2.64 2.64q-1.3 1.3-3.19 1.3t-3.18-1.3z"/>
				</svg>
				<svg class="right-icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 64 64">
					<path fill="currentColor" d="M25.04 5.93l22.92 22.89q1.3 1.3 1.3 3.18t-1.3 3.18l-22.92 22.9q-1.3 1.3-3.18 1.3t-3.19-1.3l-2.63-2.65q-1.3-1.3-1.3-3.18t1.3-3.18l17.09-17.09-17.1-17.05q-1.3-1.34-1.3-3.2t1.3-3.16l2.64-2.64q1.3-1.3 3.19-1.3t3.18 1.3z"/>
				</svg>
			</div>
		</div>
		<script>
			function setView(number) {
				const view = document.querySelector(".gallery-view");
				const curImg = view.querySelector(".full-image:last-of-type");
				const mod = document.body.clientWidth < 600 ? "-small" : "";

				const src = `/images/engagement/${number}${mod}.jpg`;

				if (curImg.src.includes(src)) {
					return;
				}

				const removeOld = () => {
					curImg.classList.remove("loaded");
					window.setTimeout(() => curImg.remove(), 500);
				}

				const newImg = document.createElement("img");
				newImg.className = "fade-in full-image";
				newImg.src = src;
				view.appendChild(newImg);
				view.offsetWidth;

				if (newImg.complete) {
					newImg.classList.add("loaded");
					removeOld();
				} else {
					newImg.onload = () => {
						newImg.classList.add("loaded");
						removeOld();
					};
				}
			}

			document.querySelector(".left-icon").onclick = () => {
				const view = document.querySelector(".gallery-view");
				const curImg = view.querySelector(".full-image:last-of-type");
				const num = Number.parseInt(curImg.src.match(/\/(\d+)/)[1], 10);
				setView(num === 1 ? 16 : num - 1);
			};

			document.querySelector(".right-icon").onclick = () => {
				const view = document.querySelector(".gallery-view");
				const curImg = view.querySelector(".full-image:last-of-type");
				const num = Number.parseInt(curImg.src.match(/\/(\d+)/)[1], 10);
				setView(num === 16 ? 1 : num + 1);
			};

			function onClick(event) {
				setView(event.target.src.match(/\/(\d+)/)[1]);
			}

			for (const image of document.querySelectorAll(".fade-in")) {
				if (image.complete) {
					image.classList.add("loaded");
				} else {
					image.onload = () => {
						image.classList.add("loaded");
					};
				}

				image.onclick = onClick;
			}

			setView(1);
		</script>
	</body>
</html>
